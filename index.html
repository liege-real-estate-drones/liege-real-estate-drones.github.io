<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Drones - Storytelling Immobilier Extérieur par Thibault Wislez</title>
    <link rel="icon" type="image/png" href="images/Logo Immobilier Liège Drones.png">
    <script src="https://cdn.tailwindcss.com" defer></script>
    <link rel="preload" href="images/Maison en fond logo et texte.png" as="image">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <meta name="description" content="Services de drones spécialisés dans le storytelling immobilier extérieur à Liège par Thibault Wislez. Photographie et vidéo aérienne professionnelle pour l'immobilier.">
    <meta name="keywords" content="drone immobilier, photographie aérienne, vidéo drone, Liège, storytelling immobilier, Thibault Wislez">
    <meta property="og:title" content="Liège Real Estate Drones - Storytelling Immobilier Extérieur">
    <meta property="og:description" content="Services de drones spécialisés dans le storytelling immobilier extérieur à Liège. Photographie et vidéo aérienne professionnelle.">
    <meta property="og:type" content="website">
    <meta name="robots" content="index, follow">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            -webkit-font-smoothing: antialiased; /* Amélioration du rendu des polices */
            -moz-osx-font-smoothing: grayscale;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
        
        .hero-image-container {
            background-image: url('images/Maison en fond logo et texte.png');
            background-size: cover;
            background-position: center 40%; /* Ajusté pour montrer le drone complet */
            height: 50vh; /* Hauteur par défaut pour mobile et petits écrans */
            min-height: 300px; /* Hauteur minimale pour éviter que l'image ne devienne trop petite */
        }
        .hero-text-container {
            @apply bg-white py-12 md:py-16 text-center; /* Padding ajusté pour mobile */
        }

        .section-title { @apply text-2xl md:text-3xl font-bold text-center mb-10 md:mb-12 text-gray-800; } /* Taille de police ajustée pour mobile */
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }

        .card { 
            @apply bg-white rounded-xl shadow-xl p-6 md:p-8 flex flex-col text-center transition-all duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-2; 
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }

        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }
        .card:nth-child(4) { animation-delay: 0.4s; }
        .card:nth-child(5) { animation-delay: 0.5s; }
        .card:nth-child(6) { animation-delay: 0.6s; }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            overflow: hidden;
            border-radius: 0.375rem; /* rounded-md */
        }
        .video-container iframe {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
        }
        .service-icon {
            @apply mx-auto mb-5 md:mb-6 text-yellow-500; /* Margin ajustée */
        }
        .legal-section-revised { 
            @apply mt-16 md:mt-20 mb-16 md:mb-20 p-8 md:p-10 bg-slate-50 border border-slate-200 rounded-xl shadow-lg max-w-4xl mx-auto; /* Padding et margins ajustés */
        }
        .legal-section-revised h3 {
            @apply text-xl md:text-2xl font-semibold text-slate-800 mb-4 flex items-center justify-center text-center; /* Taille de police et alignement ajustés */
        }
        .legal-section-revised p {
            @apply text-gray-700 text-sm md:text-base text-left leading-relaxed; /* Taille de police ajustée */
        }
        .card h3 {
            @apply text-lg md:text-xl font-semibold mb-3 md:mb-4 text-gray-700; /* Taille de police et margin ajustées */
        }
        .card p {
            @apply text-gray-600 text-sm md:text-sm flex-grow leading-relaxed; /* Taille de police ajustée */
        }
        .nav-link {
            @apply text-gray-600 hover:text-yellow-600 transition-colors px-2 py-2 rounded-md text-sm md:text-base md:px-3; /* Padding et taille de police ajustés */
        }

        /* Styles pour les transitions de page */
        /* Structure principale */
        #main-content {
            min-height: 100vh;
            /* padding-top: 64px; */ /* Will be handled by header placeholder */
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Conteneur des sections */
        .sections-container {
            flex: 1 0 auto;
            position: relative;
            background-color: #fff;
            overflow: hidden;
            padding-top: 64px; /* Account for fixed header */
        }

        /* Styles des sections */
        section {
            width: 100%;
            /* position: absolute; */ /* Will be handled by JS if needed, but start relative */
            left: 0;
            top: 0;
            opacity: 0; /* Initially hidden, JS will show */
            pointer-events: none;
            transform: translateY(20px);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }

        section.active {
            /* position: relative; */ /* JS will manage this */
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        /* Header fixe */
        /* header styling is in _header.html and its own classes */

        /* Footer */
        /* footer styling is in _footer.html and its own classes */

        /* Navigation active state */
        .nav-link.active {
            color: #d97706;
            font-weight: 500;
        }

        /* Ajustements pour le scroll */
        html, body {
            height: 100%;
            overflow-x: hidden;
            scroll-behavior: smooth;
            background-color: #f3f4f6;
        }

        /* Ajustements pour les transitions */
        .sections-container > section:not(.active) {
            display: none; /* JS will manage active display */
        }
        
        /* Media query pour les écrans plus grands pour l'image héros */
        @media (min-width: 768px) { /* md breakpoint de Tailwind */
            .hero-image-container {
                height: 60vh; /* Rétablir la hauteur pour les écrans plus grands */
            }
        }
    </style>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-100 text-gray-700">

<div id="header-placeholder"></div>

<div id="main-content">
    <div class="sections-container">
        <div id="accueil-placeholder"></div>
        <div id="a-propos-placeholder"></div>
        <div id="services-placeholder"></div>
        <div id="portfolio-placeholder"></div>
        <div id="contact-placeholder"></div>
        <div id="a-venir-placeholder"></div>
    </div>
</div>

<div id="footer-placeholder"></div>

<script defer>
document.addEventListener('DOMContentLoaded', () => {
    async function loadFragment(fragmentPath, placeholderId) {
        try {
            // Note: Fetching local files (file:///) can be unreliable in some browsers due
            // to security restrictions (CORS-like behavior). For consistent behavior
            // and to avoid potential loading issues, it's recommended to serve these
            // files via a local web server during development.
            const response = await fetch(fragmentPath);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status} for ${fragmentPath}`);
            }
            const html = await response.text();
            const placeholder = document.getElementById(placeholderId);
            if (placeholder) {
                placeholder.innerHTML = html;
            } else {
                console.error(`Placeholder with ID ${placeholderId} not found.`);
                // Potentially throw an error here or handle it as a failed load
                return Promise.reject(`Placeholder ${placeholderId} not found`);
            }
        } catch (error) {
            console.error(`Error loading fragment ${fragmentPath}:`, error);
            throw error; // Re-throw to be caught by Promise.all
        }
    }

    const fragmentsToLoad = [
        { path: './_header.html', placeholder: 'header-placeholder' },
        { path: './_accueil.html', placeholder: 'accueil-placeholder' },
        { path: './_apropos.html', placeholder: 'a-propos-placeholder' },
        { path: './_services.html', placeholder: 'services-placeholder' },
        { path: './_portfolio.html', placeholder: 'portfolio-placeholder' },
        { path: './_contact.html', placeholder: 'contact-placeholder' },
        { path: './_avenir.html', placeholder: 'a-venir-placeholder' },
        { path: './_footer.html', placeholder: 'footer-placeholder' }
    ];

    async function loadAllFragments() {
        const loadPromises = fragmentsToLoad.map(fragment => 
            loadFragment(fragment.path, fragment.placeholder)
        );
        
        try {
            await Promise.all(loadPromises);
            console.log('All fragments loaded successfully.');

            // Re-initialize scripts that depend on the new DOM content
            if (window.lucide && typeof window.lucide.createIcons === 'function') {
                lucide.createIcons();
                console.log('Lucide icons re-initialized.');
            }

            const currentYearSpan = document.getElementById('currentYear');
            if (currentYearSpan) { // Check if footer (and thus span) is loaded
                currentYearSpan.textContent = new Date().getFullYear();
                console.log('Copyright year updated.');
            }
            
            // VVVVVV NAVIGATION SCRIPT LOGIC INSERTED HERE VVVVVV
            // Gestion des transitions de page (Original Script Logic)
            const sections = document.querySelectorAll('section'); // Needs to select newly loaded sections
            const navLinks = document.querySelectorAll('.nav-link'); // Needs to select newly loaded nav links
            let currentSection = 'accueil'; // Default section
            let isAnimating = false;

            function updateURL(sectionId) {
                const url = new URL(window.location);
                url.hash = sectionId;
                history.pushState({}, '', url);
            }

            function showSection(sectionId, instant = false) {
                if (!sectionId) sectionId = 'accueil'; // Default if sectionId is empty or null
                console.log(`Attempting to show section: ${sectionId}`); // Debug log

                const targetSection = document.getElementById(sectionId);
                if (!targetSection) {
                    console.error(`Section with ID ${sectionId} not found in the DOM.`);
                    const mainContent = document.getElementById('main-content');
                    if (mainContent) {
                        mainContent.innerHTML = `<p style="text-align: center; padding: 20px; font-size: 18px; color: orange;">Error: The requested content section ('${sectionId}') could not be found or displayed.</p>`;
                    }
                    // If the missing section is not 'accueil', try to show 'accueil'.
                    // If 'accueil' is also missing, the next call will handle displaying the error for 'accueil'.
                    if (sectionId !== 'accueil') {
                        showSection('accueil', instant); 
                    }
                    return; // Important to stop further processing if section not found
                }

                // Check if sections NodeList is populated
                if (sections.length === 0) {
                    console.error("`sections` NodeList is empty. Sections might not be loaded or selected correctly.");
                    // Attempt to re-query sections, though ideally this should be populated correctly
                    // sections = document.querySelectorAll('section'); // Re-query (use with caution)
                }
                
                isAnimating = true; // Set animation flag

                // Mettre à jour la navigation
                navLinks.forEach(link => {
                    const linkSection = link.getAttribute('href').substring(1);
                    link.classList.toggle('active', linkSection === sectionId); // Simplified active class
                    link.classList.toggle('text-yellow-600', linkSection === sectionId);
                    link.classList.toggle('text-gray-600', linkSection !== sectionId);
                });

                // Cacher toutes les sections et préparer la section cible
                sections.forEach(section => {
                    if (section.id === sectionId) {
                        section.style.display = ''; // Reset display before activating
                        section.classList.add('active');
                        section.style.visibility = 'visible'; // Ensure it's visible
                    } else {
                        section.classList.remove('active');
                        section.style.visibility = 'hidden'; // Hide non-active sections
                        section.style.display = 'none'; // Ensure it's not taking space
                    }
                });
                
                // Scroll en haut de la page
                window.scrollTo(0, 0);
                
                // Clear animation flag after transition (adjust timeout if needed)
                setTimeout(() => {
                    isAnimating = false;
                }, 300); // Corresponds to transition duration

                currentSection = sectionId;
                if (history.pushState) { // Check if pushState is supported
                    updateURL(sectionId);
                } else {
                    window.location.hash = sectionId; // Fallback for older browsers
                }
                console.log(`Section ${sectionId} should now be active.`);
            }

            // Gestion du header transparent/opaque au scroll
            const header = document.querySelector('header'); // This should select the loaded header
            if (header) {
                let lastScroll = 0;
                window.addEventListener('scroll', () => {
                    const currentScroll = window.pageYOffset;
                    if (currentScroll <= 0) {
                        header.classList.remove('shadow-lg');
                        header.classList.add('bg-white/95'); // Assuming this is the default transparent state
                    } else {
                        header.classList.add('shadow-lg');
                        header.classList.add('bg-white');
                        header.classList.remove('bg-white/95');
                    }
                    lastScroll = currentScroll;
                });
            } else {
                console.error("Header element not found after fragment loading.");
            }

            // Animation des sections au scroll (IntersectionObserver)
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };

            const observerCallback = (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fade-in');
                        // observer.unobserve(entry.target); // Keep observing if sections can be hidden and reshown
                    } else {
                        // Optionally remove fade-in if it should re-animate when scrolling back up
                        // entry.target.classList.remove('animate-fade-in');
                    }
                });
            };

            const observer = new IntersectionObserver(observerCallback, observerOptions);
            const sectionDivs = document.querySelectorAll('.sections-container > div[id$="-placeholder"] > section');

            if (sectionDivs.length > 0) {
                sectionDivs.forEach(sectionContent => {
                     // Ensure sections are initially ready for observation (opacity 0 is set by CSS)
                    observer.observe(sectionContent);
                });
            } else {
                // Fallback if direct section children are not found, try observing sections directly
                // This might be needed if the structure from fragments is just the <section> tag
                const allSections = document.querySelectorAll('section');
                if(allSections.length > 0) {
                    allSections.forEach(sec => {
                        observer.observe(sec);
                    });
                } else {
                    console.error("No sections found to observe for animations.");
                }
            }

            // Navigation avec transitions (ensure navLinks is populated)
            if (navLinks.length > 0) {
                navLinks.forEach(anchor => {
                    anchor.addEventListener('click', e => {
                        e.preventDefault();
                        const sectionId = anchor.getAttribute('href').substring(1);
                        showSection(sectionId);
                    });
                });
            } else {
                console.error("Nav links not found for attaching click listeners.");
            }

            // Gestion de l'historique de navigation
            window.addEventListener('popstate', () => {
                const sectionId = window.location.hash.substring(1) || 'accueil';
                showSection(sectionId, true); // 'true' for instant if it's a popstate
            });

            // Initialisation de la première section
            // Ensure this runs after all sections are potentially defined and navLinks are ready
            const initialSectionId = window.location.hash.substring(1) || 'accueil';
            showSection(initialSectionId, true); // 'true' for instant load
            console.log(`Initial section load attempt: ${initialSectionId}`);
            // ^^^^^^ NAVIGATION SCRIPT LOGIC ENDS HERE ^^^^^^

        } catch (error) {
            console.error('Error loading one or more fragments:', error);
            const mainContent = document.getElementById('main-content');
            if (mainContent) {
                mainContent.innerHTML = '<p style="text-align: center; padding: 20px; font-size: 18px; color: red;">Error: Could not load page content. This can happen if you are opening the file directly from your computer. For best results, please try accessing it through a web server. If the problem persists, please contact support.</p>';
            }
        }
    }

    loadAllFragments();
});
</script>

</body>
</html>
